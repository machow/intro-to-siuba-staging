(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1015:function(t,e,o){"use strict";o.r(e);var n=o(9),s=o(836),a=o.n(s),i=o(995),r=o.n(i),d=o(996),c=o.n(d),p='<section class=""><section class=""> <h1 id=faceting>Faceting</h1> <p>You&#39;ve learned to use color in your scatterplots.</p> <p>Now you&#39;ll learn another way to explore your data. plotnine lets you divide your plot into subplots to get one smaller graph for each level of a variable.</p> <p>This is called faceting, and it&#39;s another powerful way to communicate relationships within your data.</p> </section></section><section class=font-size-sm><section class=font-size-sm> <h1 id=faceting-1>Faceting</h1> <pre><code class=language-python>asia_top200 = (\n  music_top200\n  &gt;&gt; filter(_.continent == &quot;Asia&quot;)\n)\nasia_top200</code></pre> <div> <style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}.dataframe thead th{text-align:right}</style><p></p> <table border=1 class=dataframe> <thead> <tr style=text-align:right> <th></th> <th>country</th> <th>position</th> <th>track_name</th> <th>artist</th> <th>streams</th> <th>duration</th> <th>continent</th> </tr> </thead> <tbody> <tr> <th>4600</th> <td>Hong Kong</td> <td>1</td> <td>WANNABE</td> <td>ITZY</td> <td>112648</td> <td>191.242</td> <td>Asia</td> </tr> <tr> <th>4601</th> <td>Hong Kong</td> <td>2</td> <td>Intentions (feat. Quavo)</td> <td>Justin Bieber</td> <td>104467</td> <td>212.867</td> <td>Asia</td> </tr> <tr> <th>4602</th> <td>Hong Kong</td> <td>3</td> <td>Señorita</td> <td>Shawn Mendes</td> <td>84196</td> <td>190.960</td> <td>Asia</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>12197</th> <td>Viet Nam</td> <td>198</td> <td>Đưa Nhau Đi Trốn (Chill Version)</td> <td>Đen</td> <td>20750</td> <td>241.959</td> <td>Asia</td> </tr> <tr> <th>12198</th> <td>Viet Nam</td> <td>199</td> <td>Hôm Nay Tôi Buồn</td> <td>Phùng Khánh Linh</td> <td>20580</td> <td>275.000</td> <td>Asia</td> </tr> <tr> <th>12199</th> <td>Viet Nam</td> <td>200</td> <td>Kick It</td> <td>NCT 127</td> <td>20495</td> <td>233.013</td> <td>Asia</td> </tr> </tbody> </table> <p>2600 rows × 7 columns</p> </div> <aside class=notes> <p>For this example, we&#39;ll use Spotify top 200 track data for countries in Asia.</p> </aside></section></section><section class=""><section class=""> <h1 id=faceting-2>Faceting</h1> <pre><code class=language-python>(asia_top200\n  &gt;&gt; ggplot(aes(&quot;position&quot;, &quot;streams&quot;, color = &quot;country&quot;))\n   + geom_point()\n)</code></pre> <p><img src='+a()(r.a)+' alt=png></p> <aside class=notes> <p>This plot shows the number of streams for each top 200 track in Asian countries.</p> <p>There are so many countries that the plot hits two issues:</p> <ol> <li>it has to use many different colors.</li> <li>many points are on top of each other.</li> </ol> <p>A facetted plot could help here, by giving each country its own small panel.</p> </aside></section></section><section class=""><section class=""> <h1 id=faceting-3>Faceting</h1> <pre><code class=language-python>(asia_top200\n  &gt;&gt; ggplot(aes(&quot;position&quot;, &quot;streams&quot;, color = &quot;country&quot;))\n   + geom_point()\n   + facet_wrap(&#39;~country&#39;)\n)</code></pre> <pre><code>/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/plotnine/utils.py:371: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.</code></pre><p><img src='+a()(c.a)+' alt=png></p> <aside class=notes> <p>You facet a plot by adding another option, with a +, to the end of your code, after geom_point.</p> <p>You add facet underscore wrap, then &quot;tilde country&quot; within the parentheses.</p> <p>In R, the tilde symbol typically means &quot;by&quot;, meaning that we&#39;re splitting the plot by country, and you can usually find it on the upper left of your keyboard. This tells ggplot2 to divide the data into subplots based on the country variable.</p> </aside></section></section><section class=""><section class=""> <h1 id=lets-practice>Let&#39;s practice!</h1> <aside class=notes> <p>Scroll down to get started with practice!</p> </aside></section></section>',l=o(835),h=o(7);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}h.a.config.optionMergeStrategies;var m={slides:p,VueRemarkRoot:l.a},g=function(t){var e=t.options.components=t.options.components||{},o=t.options.computed=t.options.computed||{};Object.keys(m).forEach((function(t){"object"===u(m[t])&&"function"==typeof m[t].render?e[t]=m[t]:o[t]=function(){return m[t]}}))},f=h.a.config.optionMergeStrategies,y="__vueRemarkFrontMatter",b={excerpt:null,title:"Facets",output:"html_document",editor_options:{chunk_output_type:"console"},chunk:"visualize"};var w=function(t){t.options[y]&&(t.options[y]=b),h.a.util.defineReactive(t.options,y,b),t.options.computed=f.computed({$frontmatter:function(){return t.options[y]}},t.options.computed)},v=Object(n.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("VueRemarkRoot",[n("Notebook",{attrs:{branch:"master",repo:"machow/intro-to-siuba",url:"https://mybinder.org",useBinder:"1",useStorage:"1"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("details",{directives:[{name:"fix-codemirror",rawName:"v-fix-codemirror"},{name:"show",rawName:"v-show",value:e.debut,expression:"nb.debut"}]},[n("code-cell",{attrs:{status:e.status,onExecute:e.execute,onReady:e.updateSetupCode,language:"python"}},[n("pre",[n("code",{pre:!0},[t._v('# TODO: explain how to run this, and that they only need the gist (loads tools)\n\n# wranglign ---------\nimport pandas as pd\nfrom siuba import *\n\n# plotting ----------\nfrom plotnine import *\n\ntheme_set(theme_classic(base_family = "Noto Sans CJK JP"))\n\n# data --------------\nfrom music_top200 import music_top200, track_features\n\n# student support ----------\nfrom siuba import pipe\nfrom IPython.display import HTML, display\nfrom siututor import Blank\n___ = Blank()\n\n# DataFrame display --------\npd.set_option("display.max_rows", 6)\n\nfrom IPython import get_ipython\n# special ipython function to get the html formatter\nhtml_formatter = get_ipython().display_formatter.formatters[\'text/html\']\n\n# here, we avoid the default df._repr_html_ method, since it inlines css\n# (style tags make vue angry)\nhtml_formatter.for_type(\n    pd.DataFrame,\n    lambda df: df.to_html(max_rows = pd.get_option("display.max_rows"), show_dimensions = True)\n)\n\n# remove the <ggplot: (528...)> printout\nhtml_formatter.for_type(ggplot, lambda g: "")\n')])])])],1),n("RevealSlides",{attrs:{slides:t.slides}}),n("h3",{attrs:{id:"exercise-1"}},[n("a",{attrs:{href:"#exercise-1","aria-hidden":"true"}},[n("span",{staticClass:"fa fa-link"})]),t._v("Exercise 1:")]),n("p",[n("strong",[t._v("TODO")])]),n("h3",{attrs:{id:"exercise-2"}},[n("a",{attrs:{href:"#exercise-2","aria-hidden":"true"}},[n("span",{staticClass:"fa fa-link"})]),t._v("Exercise 2:")]),n("p",[t._v("Below is the start of plotnine's documentation for "),n("code",{pre:!0},[t._v("facet_wrap")]),t._v(". ")]),n("img",{staticStyle:{width:"100%"},attrs:{src:o(993)}}),n("p",[t._v("Notice that the Parameters section lists "),n("code",{pre:!0},[t._v("ncol")]),t._v(" and "),n("code",{pre:!0},[t._v("nrow")]),t._v(" options. These determine how many columns or rows to use. For example, the plot below has "),n("code",{pre:!0},[t._v("nrow = 1")]),t._v(".")]),n("p",[t._v("Try out the plot as is, and with the "),n("code",{pre:!0},[t._v("nrow")]),t._v(" argument changed to "),n("code",{pre:!0},[t._v("ncol = 1")]),t._v(".\nThen, answer the questions below.")]),n("code-cell",{attrs:{status:e.status,onExecute:e.execute,ex:"a",exIndx:0,language:"python"},scopedSlots:t._u([{key:"output",fn:function(){return[n("pre",[n("code",{pre:!0},[t._v("/opt/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/site-packages/plotnine/utils.py:371: FutureWarning: The frame.append method is deprecated and will be removed from pandas in a future version. Use pandas.concat instead.\n")])]),n("p",[n("g-image",{attrs:{src:o(994),alt:"png"}})],1)]},proxy:!0}],null,!0)},[n("pre",[n("code",{pre:!0},[t._v('# This code keeps the 3 artists listed ----\nartists_to_keep = ["Billie Eilish", "ITZY", "Roddy Ricch"]\n\nsome_artists = (\n  track_features\n  >> filter(_.artist.isin(artists_to_keep))\n)\n\n# This code plots the data ----\n(some_artists\n  >> ggplot(aes("energy", "valence", color = "artist"))\n   + geom_point()\n   + facet_wrap("~artist", nrow = 1)\n   + labs(title = "Song features across 3 artists")\n)\n')])])]),n("prompt-expandable",{attrs:{header:"Which of the three artists tends to have the lowest valence?"}},[n("q-multiple-choice",[n("q-opt",{attrs:{text:"Billie Eilish"}},[n("span",[t._v('Correct! We\'ll discuss how to measure the idea of "tends to have" in the next chapter.')])]),n("q-opt",{attrs:{text:"ITZY"}},[n("span",[t._v("That's not right. This artist tends to have the highest valence.")])]),n("q-opt",{attrs:{text:"Roddy Ricch"}},[n("span",[t._v("That's not right. Look for the cluster of points toward the bottom of the plot.")])])],1)],1),n("p",[t._v("Which value seems easier to compare across facets, when ncol is set to 1?")]),n("details",[n("summary",[t._v("answer")]),t._v("\n    \nThis is subjective, but I would say energy is easier to compare, since there is only one x-axis for across all plots. (For example, there is a only one spot on the x-axis where energy is .25).\n    \n")])]}}])})],1)}),[],!1,null,null,null);"function"==typeof g&&g(v),"function"==typeof w&&w(v);e.default=v.exports},835:function(t,e,o){"use strict";e.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}},836:function(t,e,o){"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t)}},993:function(t,e,o){t.exports=o.p+"assets/img/facet_wrap_docs.81eabe7b.png"},994:function(t,e){t.exports={type:"image",mimeType:"image/png",src:"/assets/static/02d-facets_5_1.8e7c192.647ad2f32f107cd70cca876c8c7c6e60.png",size:{width:482,height:293},sizes:"(max-width: 482px) 100vw, 482px",srcset:["/assets/static/02d-facets_5_1.8e7c192.647ad2f32f107cd70cca876c8c7c6e60.png 482w"],dataUri:"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 482 293' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e2a791a2c9033a94167b22cadb76f55b'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e2a791a2c9033a94167b22cadb76f55b)' width='482' height='293' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAnCAYAAAC/mE48AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG3ElEQVRo3sVaZ1PrOhDN//81zMAHGBiGdimXXhII6U4jEBJSHbfs0xFZX9u4xTh5ntHItiRrtTpb5Qz5XPP5PLRwH8uyXOMMw6Blr7AxPFdcmpJcmaDFhzEE12QyoT9//tDx8TGdnZ3J%2bvz8nLa2tuj09JT29vbo%2bvrablcUhY6Ojuj29lY%2bo08%2bn5fl/v6eTk5OaH9/X9a7u7v08vISuvAgmpdlRiYOx/0u0zSpUCjQ4%2bMjlctl2tzcpE6nQ9lsVpZcLkdPT0%2byDfdvb2%2byb71ep2KxKNsqlQq1223Z5/n5Wd6jL5hSq9VCCfejLwkSMn5cLJVKcnGoQRwWhJ17fX2V9w8PD3KHqtUqNZtNubtYDEqj0ZAFC0WNNvTBAsEAjEMbCtrwDSwW9/yOayADczJT7u7uJF34FmgDI1GjXdO0ZAhwQocLJsXFMg4mANqXl5c2hAF/EOqUYxB2dXVlv8N4IAUXFgp4g2BGENp5Diwi%2b5S123Dd3NzIeXZ2diTTcY/5QQf6MO1g/GAwSC4C3kEXFxc2AsBlFDAFu4AabVxzO5gEWEMPgCB%2b7yz8TXv3it91pVShfO5FLoz7cj/MCdQAeXiPZ%2b%2b8QJaqqr9DAHbi8/OTRqOR/GiSazab2bIbhxCBN1m/6R1q62%2bklGuJZTmxDuBBuq5LGEL2ojRwkFaeTqdy95mhcceplkpjY0LlUjnRvL%2b2At5BgJbzfdRETgZA1mMjwPkNa07FUvFXCEjkB/gpQS8Dwu6TMoDbNUujL3MQyoA0djqWGeQ6CAGWEBNL11JBALcPjAEVVWEZhDFYlgFpMCEWAuzdardIazZWIgJhDIhC4K8R4P0g2%2bogbqclAtznw%2bhSTVUCrYCNli9DmEx1oWTTEQUbAXBcYMJ6vZ6LAVG7kQYDtLlGI2PssgK%2b35%2bYdH87DkVFmKWIZACIf39/lx6dS/aFm4n7WV0hS52mJgKufgEi4F0Ydr5amQlmWIGWahn/IOO3y14RmBbyYuEq9Xe3Se9%2bpKsDFt1My/wxb9ACHgQKWk0t0lL5KU3vsysaZOfFVoLSPlsrEQHvWMztxwC%2bHw1N4e5agXRwTIH5d7a3ZdyB8BveaRj9GQwE7DkACfMD5gsGBSnIVTKgWdeo3zNsBRgE/a%2bvL/oQLj3ceoTgvC4Onn4gAC7w4eGhTHAwIZIBi46zWpWsmRrLHqfNgDCvM/Rb1TKNBCN29/ZkkgVBFtbICRkXA6D8kLXhaMrWAawcP7s0N/RQc7gOBATJsS8tqk6mWNdUrAkbPB6PaTgcypAZNLoYgEQCUlCIApHAgDhwPsBvcokKpUpGv7cWBPB98VUVliraF0H9ZnyQNbekNUNShXMFfn0lA5DsQCfIDGQHMXeYTTUnY5dLvA4GjEbfMgwmDAZGKALquiJD7VarJXMHfolX7p%2bBckAW54cIRNjWdYmA93kyNqlSVn0YsMgwwFcQil%2bdqpIB49HY3liE%2bqihKG0E%2bHlnTitgO0pikHSEhEJUSwVfmVwlAuK646gLeVUsckhnZ6cyQ4UMNbJGuEdaDaiwGeCnWPyCIa3VpLlpSFNoqer/goAo93aZuMAWAT85ZzMon4UWnQsxmTX%2bucGrcIXjMKDd0qjV0CIt0j%2b32XJlppzPLhEIc4Unz9%2bZWv3jnYYXZ4vsjbVyBPhBHw7QMlFgnESKKycog6FOh/JCRmZCzi2HYjR6n65cwDoQEDcjlUo4DGuAkx1oyIIQAQumbmE%2btGadxve3NLr6m2pOMA4ChgNTxgErTYn9EIGFEuRLFWHq6OZS6oJ1BUN2suRdp%2b6HvrJk6Y%2bUmCUWWW40yRBh76z2neKeZB9d7vC6lOCqYB95Nvjy98J2db89v4kdCUadCzAD4p4LhCFg2fKr02HnRwrCf9aF02N02mQK5WcJN1lXqkudDCW5kp5IpXc6vPApc8IKDITj03vO0UCp0VQESmOhHCdih%2bEyY6cRPqPwM0q/35enSogvEIHxe2/foGecTPHzdDEXt0V9K1UElAUUKzWF6u02vYp7HEwq9TrVBLzhUsJRwk6jINqCawnow/fGOz7yxoL4GB3PODzls38U5zE7j8XRGh/PYV7ui8iOj%2b7Qn4/O%2bWjdDFDQif4QsQMPwVlMwuExnkE0R4vdble2gXjvhQiM/wCRlkTsGBbACVeMBeRBvPeCT8L/AfC8zrGIXDEvH8%2bn/oMEKzBwFYRDtvEOi8IzCtpBKOCO90530zkWxCPXAJGAiIB49MFYLjwmybxOZZsKAuJyMywQcRIESG9sbMiU1MHBgfyVxhl6B4XWy9CV6k9SUYcMcVLNzm9gN3m3sPv4D8hvbNJ5f%2bsZ/geddw%2bqDObt5QAAAABJRU5ErkJggg==' /%3e%3c/svg%3e"}},995:function(t,e,o){t.exports=o.p+"assets/img/02d-slides_8_0.c1fcbe1d.png"},996:function(t,e,o){t.exports=o.p+"assets/img/02d-slides_11_1.5955671d.png"}}]);